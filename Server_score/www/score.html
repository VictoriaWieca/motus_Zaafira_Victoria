<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="score.css">
        <style>
            table,
            th,
            td {
                padding: 10px;
                border-collapse: collapse;
            }
        </style>
    </head>


  <body>
    <script TYPE="text/javascript" src="https://code.jquery.com/jquery-3.6.1.min.js"
    crossorigin="anonymous">
    </script>


    <br><input type="button" id="back-to-motus" onclick="location.href='http://localhost:3000/index.html';" value="Back to Motus"></input><br><br>

<div id="score-body">
    <table>
        <tbody>
            <th>
                <h1>Votre score ðŸ‘‘</h1>
            </th>
            <tr>
                <td class="score"> Nb de mot(s) trouvÃ©(s)</td>
                <td class="score"><span id="myScore"></span></td>
            </tr>
            <tr>
                <td class="average">Nb d'essai(s) moyen</td>
                <td class="average" id="myAverage"></td>
            </tr>
        </tbody>
    </table>
</div>

    <script>
        var score='';
        var nbTriesArray= [];
        
        $.get("/score", function( data ) {
            score = data.new_score;
            nbTriesArray = data.nb_tries;
            console.log(`testtttttt ${score}, ${nbTriesArray}`);
            // Read data
            if (score=='')
                $("#myScore").html(0);
            else
                $("#myScore").html(score);


            // Read data
            //myAverage = JSON.parse(localStorage.getItem("nbTriesArray"));
            if (nbTriesArray=='')
                $("#myAverage").html(0);
            else
                $("#myAverage").html(ArrayAvg(nbTriesArray));
            console.log(nbTriesArray);
        });
        
        function ArrayAvg(myArray) {
        if (myArray==null){
            return 0;
        }
          var i = 0, summ = 0, ArrayLen = myArray.length;
          while (i < ArrayLen) {
              summ = summ + parseInt(myArray[i++]);
              console.log(summ);
          }
          return summ / ArrayLen;
        }
        

        
    </script>
    
  </body>
</html>